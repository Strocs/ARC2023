---
import { Icon } from 'astro-icon'
import { getLocationById } from '../utils'
import ScheduleList from './ScheduleList.astro'
const { locationId, eventId } = Astro.props
const { styles, schedule } = getLocationById(locationId)

const musicSchedule =
	locationId === 'azotea-arc'
		? schedule[0].events.filter((item) => item.category === 'Música')
		: null
const ilustratorsSchedule =
	locationId === 'azotea-arc'
		? schedule[0].events.filter((item) => item.category === 'Ilustración')
		: null

const splittedDay = locationId === 'azotea-arc' ? schedule[0].day.split('\n') : null
---

<div class='flex flex-col gap-5'>
	{
		schedule.map(({ day, events }) => (
			<div class='font-normal text-base relative flex flex-col gap-1'>
				<div class="leading-3">
					<p class='text-lg font-semibold'>
						<Icon name='mdi:calendar-multiselect' class={`w-6 inline ${styles.textColor}`} />
						{!splittedDay ? day : (splittedDay[0])}
					</p>
					{!!splittedDay && <span class="font-normal text-base leading-3 pl-[1.85rem]">{splittedDay[1]}</span>}
				</div>
				{ilustratorsSchedule
				? (
					<ul class='flex flex-col gap-2 mt-3'>
						<li class='text-xl pl-7 font-normal'>Ilustración</li>
						{ilustratorsSchedule.map((event) => (
							<ScheduleList
								styles={styles}
								locationId={locationId}
								event={event}
								eventId={eventId}
							/>
						))}
					</ul>
				)
				: (
					<ul class='flex flex-col gap-2'>
						{events.map((event) => (
							<ScheduleList
								styles={styles}
								locationId={locationId}
								event={event}
								eventId={eventId}
							/>
						))}
					</ul>
				)}

				{!!musicSchedule && (
					<ul class='flex flex-col gap-2 mt-5'>
						<li class='text-xl pl-7 font-normal'>Música</li>
						{musicSchedule.map((event) => (
							<ScheduleList
								styles={styles}
								locationId={locationId}
								event={event}
								eventId={eventId}
							/>
						))}
					</ul>
				)}
			</div>
		))
	}
</div>
